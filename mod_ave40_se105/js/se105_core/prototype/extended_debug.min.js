function showExtendedDebug(){if(null!=debugWindow&&hideDebug(),null==debugWindow){commandHistory=new Array,historyIndex=0,debugWindow=new Window("debug_window",{className:"dialog",width:250,height:100,right:4,minWidth:250,bottom:42,zIndex:1e3,opacity:1,showEffect:Element.show,resizable:!0,title:"Debug"}),debugWindow.getContent().innerHTML="<style>#debug_window .dialog_content {background:#000;}</style> <div font='monaco' id='debug' style='padding:3px;color:#0F0;font-family:monaco'></div>";var e='<div id="debug_window_inspect" style="width: 15px; height: 15px; background: transparent url(themes/default/inspect.gif) no-repeat 0 0; position:absolute; top:5px; left:70px; cursor:pointer; z-index:3000;"></div>';new Insertion.After("debug_window_maximize",e),Event.observe("debug_window_inspect","click",enterInspectionMode,!1),e='Eval:<input id="debug_window_command" type="textbox" style="width:150px; height: 12px; color: black;">',debugWindow.setStatusBar(e),Event.observe("debug_window_command","mousedown",donothing),Event.observe("debug_window_command","keypress",evalJS,!1)}debugWindow.show()}function donothing(e){return Field.activate("debug_window_command"),!1}function evalJS(evt){if(evt.keyCode==Event.KEY_RETURN){var js=$F("debug_window_command");try{var ret=eval(js);null!=ret&&debug(ret)}catch(e){debug(e)}$("debug_window_command").value="",Field.activate("debug_window_command"),commandHistory.push(js),historyIndex=0}if(evt.keyCode==Event.KEY_UP&&commandHistory.length>historyIndex){historyIndex++;var js=commandHistory[commandHistory.length-historyIndex];$("debug_window_command").value=js,Event.stop(evt),Field.activate("debug_window_command")}if(evt.keyCode==Event.KEY_DOWN&&commandHistory.length>=historyIndex&&historyIndex>1){historyIndex--;var js=commandHistory[commandHistory.length-historyIndex];$("debug_window_command").value=js,Event.stop(evt),Field.activate("debug_window_command")}}function enterInspectionMode(e){Event.stopObserving("debug_window_inspect","click",enterInspectionMode,!1),document.body.style.cursor="help",Event.observe(window,"click",inspectItem,!1)}function inspectItem(e){var n=Event.element(e);"debug_window_inspect"!=n.id&&(clearDebug(),document.body.style.cursor="default",debug(n.id),inspect(n),Event.stopObserving(window,"click",inspectItem,!1),Event.observe("debug_window_inspect","click",enterInspectionMode,!1))}function clearDebug(){var e=$("debug");if(null!=e){e.innerHTML=" ";document.getElementsByClassName("inspector").each(function(e){Element.remove(e)})}}var commandHistory,historyIndex;