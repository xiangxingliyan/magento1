var Tooltip=Class.create();Tooltip.prototype={initialize:function(t,e){var i=Object.extend({default_css:!1,margin:"0px",padding:"5px",backgroundColor:"#d6d6fc",min_distance_x:5,min_distance_y:5,delta_x:0,delta_y:0,zindex:1e3},arguments[2]||{});this.element=$(t),this.options=i,$(e)?this.tool_tip=$(e):(this.tool_tip=$(document.createElement("div")),document.body.appendChild(this.tool_tip),this.tool_tip.addClassName("tooltip"),this.tool_tip.appendChild(document.createTextNode(e))),this.tool_tip.hide(),this.eventMouseOver=this.showTooltip.bindAsEventListener(this),this.eventMouseOut=this.hideTooltip.bindAsEventListener(this),this.eventMouseMove=this.moveTooltip.bindAsEventListener(this),this.registerEvents()},destroy:function(){Event.stopObserving(this.element,"mouseover",this.eventMouseOver),Event.stopObserving(this.element,"mouseout",this.eventMouseOut),Event.stopObserving(this.element,"mousemove",this.eventMouseMove)},registerEvents:function(){Event.observe(this.element,"mouseover",this.eventMouseOver),Event.observe(this.element,"mouseout",this.eventMouseOut),Event.observe(this.element,"mousemove",this.eventMouseMove)},moveTooltip:function(t){Event.stop(t);var e=Event.pointerX(t),i=Event.pointerY(t),o=Element.getDimensions(this.tool_tip),n=o.width,s=o.height;n+e>=this.getWindowWidth()-this.options.min_distance_x?(e-=n,e-=this.options.min_distance_x):e+=this.options.min_distance_x,s+i>=this.getWindowHeight()-this.options.min_distance_y?(i-=s,i-=this.options.min_distance_y):i+=this.options.min_distance_y,this.setStyles(e,i)},showTooltip:function(t){Event.stop(t),this.moveTooltip(t),new Element.show(this.tool_tip)},setStyles:function(t,e){Element.setStyle(this.tool_tip,{position:"absolute",top:e+this.options.delta_y+"px",left:t+this.options.delta_x+"px",zindex:this.options.zindex}),this.options.default_css&&Element.setStyle(this.tool_tip,{margin:this.options.margin,padding:this.options.padding,backgroundColor:this.options.backgroundColor,zindex:this.options.zindex})},hideTooltip:function(t){new Element.hide(this.tool_tip)},getWindowHeight:function(){return navigator.appVersion.indexOf("MSIE")>0?document.body.clientHeight:window.innerHeight},getWindowWidth:function(){return navigator.appVersion.indexOf("MSIE")>0?document.body.clientWidth:window.innerWidth}};