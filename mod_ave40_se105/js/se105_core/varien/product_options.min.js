var Product=Product||{};Product.OptionsPrice=Class.create(),Product.OptionsPrice.prototype={initialize:function(i){this.productId=i.productId,this.priceFormat=i.priceFormat,this.includeTax=i.includeTax,this.defaultTax=i.defaultTax,this.currentTax=i.currentTax,this.productPrice=i.productPrice,this.showIncludeTax=i.showIncludeTax,this.showBothPrices=i.showBothPrices,this.productOldPrice=i.productOldPrice,this.priceInclTax=i.priceInclTax,this.priceExclTax=i.priceExclTax,this.skipCalculate=i.skipCalculate,this.duplicateIdSuffix=i.idSuffix,this.specialTaxPrice=i.specialTaxPrice,this.tierPrices=i.tierPrices,this.tierPricesInclTax=i.tierPricesInclTax,this.oldPlusDisposition=i.oldPlusDisposition,this.plusDisposition=i.plusDisposition,this.plusDispositionTax=i.plusDispositionTax,this.oldMinusDisposition=i.oldMinusDisposition,this.minusDisposition=i.minusDisposition,this.exclDisposition=i.exclDisposition,this.optionPrices={},this.customPrices={},this.containers={},this.displayZeroPrice=!0,this.initPrices()},setDuplicateIdSuffix:function(i){this.duplicateIdSuffix=i},initPrices:function(){this.containers[0]="product-price-"+this.productId,this.containers[1]="bundle-price-"+this.productId,this.containers[2]="price-including-tax-"+this.productId,this.containers[3]="price-excluding-tax-"+this.productId,this.containers[4]="old-price-"+this.productId},changePrice:function(i,t){this.optionPrices[i]=t},addCustomPrices:function(i,t){this.customPrices[i]=t},getOptionPrices:function(){var i=0,t=0,e=0,s=0,r=this.currentTax;return $H(this.optionPrices).each(function(c){void 0!==c.value.price&&void 0!==c.value.oldPrice?(i+=parseFloat(c.value.price),e+=parseFloat(c.value.oldPrice)):"nontaxable"==c.key?t=c.value:"priceInclTax"==c.key?s+=c.value:"optionsPriceInclTax"==c.key?s+=c.value*(100+r)/100:(i+=parseFloat(c.value),e+=parseFloat(c.value))}),[i,t,e,s]},reload:function(){var i,t,e=this.getOptionPrices(),s=e[1],r=e[2],c=e[3];if(e=e[0],$H(this.containers).each(function(a){var o,n,l,u,p,h,d;if($(a.value)){a.value=="old-price-"+this.productId&&this.productOldPrice!=this.productPrice?(o=this.productOldPrice,n=this.oldPlusDisposition,l=this.oldMinusDisposition):(o=this.productPrice,n=this.plusDisposition,l=this.minusDisposition),u=c,a.value=="old-price-"+this.productId&&void 0!==r?i=r+parseFloat(o):"true"==this.specialTaxPrice&&void 0!==this.priceInclTax&&void 0!==this.priceExclTax?(i=e+parseFloat(this.priceExclTax),u+=this.priceInclTax):(i=e+parseFloat(o),u+=parseFloat(o)*(100+this.currentTax)/100),"true"==this.specialTaxPrice?(p=i,h=u):"true"==this.includeTax?(d=i/(100+this.defaultTax)*this.defaultTax,p=i-d,h=p*(1+this.currentTax/100)):(d=i*(this.currentTax/100),p=i,h=p+d);var x=0,P=0;Object.values(this.customPrices).each(function(i){i.excludeTax&&i.includeTax?(x+=parseFloat(i.excludeTax),P+=parseFloat(i.includeTax)):(x+=parseFloat(i.price),P+=parseFloat(i.price))}),p+=x,h+=P,void 0===this.exclDisposition&&(p+=parseFloat(n)),h+=parseFloat(n)+parseFloat(this.plusDispositionTax),p-=parseFloat(l),h-=parseFloat(l),p+=parseFloat(s),h+=parseFloat(s),i=a.value=="price-including-tax-"+this.productId?h:a.value=="price-excluding-tax-"+this.productId?p:a.value=="old-price-"+this.productId?this.showIncludeTax||this.showBothPrices?h:p:this.showIncludeTax?h:p,i<0&&(i=0),t=i>0||this.displayZeroPrice?this.formatPrice(i):"",$(a.value).select(".price")[0]?($(a.value).select(".price")[0].innerHTML=t,$(a.value+this.duplicateIdSuffix)&&$(a.value+this.duplicateIdSuffix).select(".price")[0]&&($(a.value+this.duplicateIdSuffix).select(".price")[0].innerHTML=t)):($(a.value).innerHTML=t,$(a.value+this.duplicateIdSuffix)&&($(a.value+this.duplicateIdSuffix).innerHTML=t))}}.bind(this)),"undefined"==typeof skipTierPricePercentUpdate&&void 0!==this.tierPrices)for(var a=0;a<this.tierPrices.length;a++)$$(".benefit").each(function(i){var t=function(i){var t=this.priceFormat,e=void 0===t.decimalSymbol?",":t.decimalSymbol,s="[^0-9-"+e+"]";return i=i.replace(new RegExp(s,"g"),""),i=i.replace(e,"."),parseFloat(i)}.bind(this),e=function(i,e,s,r){if(void 0!==s){var c=t(i.innerHTML),o=c+e;s.innerHTML=this.formatPrice(o);Selector.findChildElements(r,[".percent.tier-"+a]).each(function(i){i.innerHTML=Math.ceil(100-100/c*o)})}}.bind(this),s=$$(".tier-price.tier-"+a+" .price");if(this.showBothPrices){var r=$(this.containers[3]),c=this.tierPrices[a],o=s[0];e(r,c,o,i);var n=$(this.containers[2]),l=this.tierPricesInclTax[a],u=s[1];e(n,l,u,i)}else if(this.showIncludeTax){var p=$(this.containers[0]),l=this.tierPricesInclTax[a],u=s[0];e(p,l,u,i)}else{var p=$(this.containers[0]),c=this.tierPrices[a],o=s[0];e(p,c,o,i)}},this)},formatPrice:function(i){return formatCurrency(i,this.priceFormat)}};