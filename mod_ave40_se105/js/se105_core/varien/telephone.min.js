var telephoneElem=Class.create();telephoneElem.prototype={initialize:function(e,t,s,i,h){this.valField=e,this.f1=t,this.f2=s,this.f3=i,this.f4=h,this.last=i,this.eventKeyPress=this.keyPress.bindAsEventListener(this),this.eventKeyUp=this.keyUp.bindAsEventListener(this),Event.observe(this.f1,"keyup",this.eventKeyUp),Event.observe(this.f2,"keyup",this.eventKeyUp),Event.observe(this.f3,"keyup",this.eventKeyUp),Event.observe(this.f1,"keypress",this.eventKeyPress),Event.observe(this.f2,"keypress",this.eventKeyPress),Event.observe(this.f3,"keypress",this.eventKeyPress),this.f4&&(Event.observe(this.f4,"keyup",this.eventKeyUp),Event.observe(this.f4,"keypress",this.eventKeyPress),this.last=h),this.loadValues()},keyPress:function(e){e.keyCode},keyUp:function(e){var t=Event.element(e),s=e.keyCode;if(t.id!=this.last&&s!=Event.KEY_TAB&&16!=s&&s!=Event.KEY_BACKSPACE&&s!=Event.KEY_DELETE&&s!=Event.KEY_LEFT&&s!=Event.KEY_RIGHT){var i=t.size;t.value.length==i&&(nextElem=this.getNextElement(t.id))&&Field.activate(nextElem)}this.setValField()},getNextElement:function(e){return e!=this.last&&(e==this.f1?this.f2:e==this.f2?this.f3:e==this.f3&&this.f4)},setValField:function(){cur_value="",$F(this.f1)&&(cur_value+="("+$F(this.f1)+") "),$F(this.f2)&&(cur_value+=$F(this.f2)),$F(this.f3)&&(cur_value+="-"+$F(this.f3)),this.f4&&(cur_value+=$F(this.f4)?"-"+$F(this.f4):""),$(this.valField).value=cur_value},loadValues:function(){var e=$F(this.valField);e&&e.length&&(re=/^[\(]?(\d{3})[\)]?[-|\s]?(\d{3})[-|\s](\d{4})[-|\s]?(\d{0,4})?$/,re.test(e)&&(arrVal=re.exec(e),$(this.f1).value=arrVal[1],$(this.f2).value=arrVal[2],$(this.f3).value=arrVal[3],this.f4&&arrVal[4]&&($(this.f4).value=arrVal[4])))}};