var Tooltip=Class.create();Tooltip.prototype={initialize:function(t,i){this.el=$(t),this.initialized=!1,this.setOptions(i),this.showEvent=this.show.bindAsEventListener(this),this.hideEvent=this.hide.bindAsEventListener(this),this.updateEvent=this.update.bindAsEventListener(this),Event.observe(this.el,"mouseover",this.showEvent),Event.observe(this.el,"mouseout",this.hideEvent),this.content=this.el.title,this.el.title="",this.el.descendants().each(function(t){Element.readAttribute(t,"alt")&&(t.alt="")})},setOptions:function(t){this.options={backgroundColor:"#999",borderColor:"#666",textColor:"",textShadowColor:"",maxWidth:250,align:"left",delay:250,mouseFollow:!0,opacity:1,appearDuration:.25,hideDuration:.25},Object.extend(this.options,t||{})},show:function(t){this.xCord=Event.pointerX(t),this.yCord=Event.pointerY(t),this.initialized||(this.timeout=window.setTimeout(this.appear.bind(this),this.options.delay))},hide:function(t){this.initialized&&(this.appearingFX.cancel(),this.options.mouseFollow&&Event.stopObserving(this.el,"mousemove",this.updateEvent),new Effect.Fade(this.tooltip,{duration:this.options.hideDuration,afterFinish:function(){Element.remove(this.tooltip)}.bind(this)})),this._clearTimeout(this.timeout),this.initialized=!1},update:function(t){this.xCord=Event.pointerX(t),this.yCord=Event.pointerY(t),this.setup()},appear:function(){this.tooltip=Builder.node("div",{className:"tooltip",style:"display: none;"},[Builder.node("div",{className:"xboxcontent"}).update(this.content)]),document.body.insertBefore(this.tooltip,document.body.childNodes[0]),Element.extend(this.tooltip),this.options.width=this.tooltip.getWidth(),this.tooltip.style.width=this.options.width+"px",this.setup(),this.options.mouseFollow&&Event.observe(this.el,"mousemove",this.updateEvent),this.initialized=!0,this.appearingFX=new Effect.Appear(this.tooltip,{duration:this.options.appearDuration,to:this.options.opacity})},setup:function(){this.options.width>this.options.maxWidth&&(this.options.width=this.options.maxWidth,this.tooltip.style.width=this.options.width+"px"),this.xCord+this.options.width>=Element.getWidth(document.body)&&(this.options.align="right",this.xCord=this.xCord-this.options.width+20),this.tooltip.style.left=this.xCord-7+"px",this.tooltip.style.top=this.yCord+12+"px"},_clearTimeout:function(t){return clearTimeout(t),clearInterval(t),null}};