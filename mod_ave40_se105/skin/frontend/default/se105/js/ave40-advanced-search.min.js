~function(e){function a(e,a){var i=SearchRequestRebuildParams[e];if(i&&i.length>0)for(var n=0;n<i.length;n++)if(i[n]==a){SearchRequestRebuildParams[e].splice(n,1);break}}function i(){var e="/search";for(var a in SearchRequestRebuildParams)SearchRequestRebuildParams[a].length>0&&(e+="/"+a+"/"+SearchRequestRebuildParams[a].join("-"));return e}e(function(){SearchRequestParams.categories||(SearchRequestParams.categories=[]),SearchRequestParams.brands||(SearchRequestParams.brands=[]),function(){var a=e(".brand-more-pop .brands-screen-list li");a.on("click",function(){e(this).toggleClass("user-selected")}),e("#more-brands-ok").on("click",function(){if(a.each(function(){var a=String(e(this).data("brandId")),i=SearchRequestParams.brands.indexOf(a);e(this).hasClass("user-selected")?-1===i&&SearchRequestParams.brands.push(a):-1!==i&&SearchRequestParams.brands.splice(i,1)}),0==SearchRequestParams.brands.length)window.location.href=e(this).data("urlDel");else{var i=e(this).data("urlTpl");window.location.href=i.replace("{{val}}",SearchRequestParams.brands.join("-"))}}),e(".brands-screen .brand-more").on("click",function(){var i=SearchRequestParams.brands;a.each(function(){var a=String(e(this).data("brandId"));if(!a)return void e(this).removeClass("user-selected");i.indexOf(a)>=0?e(this).addClass("user-selected"):e(this).removeClass("user-selected")})})}(),e(".price-section .price-btn").on("click",function(){var a=e("#price-min").val(),i=e("#price-max").val(),n=[];if(""!==a&&(n.push("from"),n.push(a)),""!==i&&(n.push("to"),n.push(i)),0==n.length)window.location.href=e(this).data("urlDel");else{var r=e(this).data("urlTpl");window.location.href=r.replace("{{val}}",n.join("-"))}}),function(){for(var a=e(".additional-filter"),i=0;i<a.length;i++){var n=a.eq(i),r=String(n.data("filterKey"));if(r){var o=SearchRequestParams[r],t=n.find(".litter-filter"),s=(t.find("[data-value]"),n.find(".reset-filter"),n.find(".choose-more-btn")),c=n.find(".choose-more .choose-more-ok"),l=n.find(".choose-more [data-value]");s.on("click",function(a,i,n){return function(){var a=i||[];n.each(function(){var i=String(e(this).data("value"));a.indexOf(i)>=0?e(this).addClass("user-selected"):e(this).removeClass("user-selected")})}}(0,o,l)),l.on("click",function(){e(this).toggleClass("user-selected")}),c.on("click",function(a,i,n){return function(){var a=[],i=n.filter(".user-selected");if(0==i.length)return void(window.location.href=e(this).data("urlDel"));if(i.each(function(){var i=String(e(this).data("value"));i&&a.push(i)}),a.length>0){var r=e(this).data("urlTpl");window.location.href=r.replace("{{val}}",a.join("-"))}else window.location.href=e(this).data("urlDel")}}(0,0,l))}}}(),e(document).ready(function(){var a=e("#left-screen-box").find("li ");a.children(".choose-more").hide(),a.find(".left-screen-title").click(function(){e(this).closest("li").children("ul").toggle(),"none"==e(this).closest("li").children("ul").css("display")?e(this).find(".left-arrow-icon").addClass("on"):e(this).find(".left-arrow-icon").removeClass("on")}),a.find("dt").click(function(){console.log(1),e(this).siblings("dd").toggle(),"none"==e(this).siblings("dd").css("display")?e(".block-layered-nav dt").addClass("on"):e(".block-layered-nav dt").removeClass("on")}),a.find(".left-choose").click(function(a){a.preventDefault(),a.stopPropagation(),"none"==e(this).closest("li").children(".choose-more").css("display")?(e(".choose-more").not(e(this).closest("li").children(".choose-more")[0]).animateHide(),e(this).closest("li").children(".choose-more").animateShow()):e(".choose-more").animateHide()}),e(".color-choose-ok").click(function(){e(this).closest(".choose-more").animateHide()}),e(".choose-more-operation .cancel").click(function(){e(this).closest(".choose-more").animateHide()}),e(".brands-screen .brand-more").click(function(){e(".brand-more-pop").animateShow()}),e(".brand-more-pop .color-choose-ok").click(function(){e(".brand-more-pop").animateHide()}),e(".brand-more-pop .cancel").click(function(){e(".brand-more-pop").animateHide()})}),e("#price-min, #price-max").on("keyup",function(a){a.keyCode==ave40.params.keyCode.enter&&e("#price-filter-button").click()}),e("button[data-popup-loading=1],a[data-popup-loading=1]").click(function(){ave40.showLoading("Searching..")}),e("body").click(function(){e(".choose-more").animateHide()}),e(".choose-more").click(function(e){e.preventDefault(),e.stopPropagation()}),function(){function n(n,t,s){var c=e(o);c.find(".text").html(s),c.find(".remove").on("click",function(e,n){return function(){a(e,n),location.href=i()}}(n,t)),r.append(c)}var r=e("#selected_items"),o=e("#remove_filter_template").html();!function(){var a=e("#brands_list");$lis=a.find(".brand-more-pop .brands-screen-list li.user-selected");for(var i=0;i<$lis.length;i++)$li=e($lis[i]),n("brands",$li.data("brandId"),$li.find("img").prop("title"))}(),function(){for(key in SearchAdditionalFilters){var e=SearchRequestRebuildParams[key],a=SearchAdditionalFilters[key].options;if(e&&e.length>0)for(var i=0;i<e.length;i++)n(key,e[i],a[e[i]])}}(),function(){var e=SearchRequestRebuildParams.price;if(e){var a=e.from,i=e.to,r="";r=a&&i?a+"~"+i:a?">="+a:"<="+i;var o=a?"from-"+a:"",t=i?"to-"+i:"";n("price",(o||"")+(o?"-":"")+t,"Price "+r)}}(),function(e,a){var i=SearchRequestRebuildParams[e];i&&i[0]&&n(e,1,a)}("tpd","TPD")}()})}(jQuery);